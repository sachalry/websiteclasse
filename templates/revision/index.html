<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©vision - Terminale G</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="shortcut icon" href="/static/icon.ico" type="image/x-icon">
</head>
<body>
    <div class="burger_menu" id="burger_menu">
        <button class="burger_menu_close" onclick="document.getElementById('burger_menu').classList.toggle('show')">
            <span class="cross_line"></span>
            <span class="cross_line"></span>
        </button>
        <h2 class="burger_menu_title">‚ú¶TermG‚ú¶</h2>
        <nav class="burger_menu_links">
            <a href="/" class="burger_menu__link">Acceuil</a>
            <a href="/cours/" class="burger_menu__link">Cours</a>
            <a href="/revision/" class="burger_menu__link">R√©vision</a>
            <a href="/static/feuille_de_semaine.pdf" target="_blank" class="burger_menu__link">Feuille de semaine</a>
        </nav>
    </div>
    <header class="header">
        <nav class="header_links">
            <a href="/" class="header__link">Acceuil</a>
            <a href="/cours/" class="header__link">Cours</a>
        </nav>
        <h1 class="header_title">‚ú¶TermG‚ú¶</h1>
        <nav class="header_links">
            <a href="/revision/" class="header__link">R√©vision</a>
            <a href="/static/feuille_de_semaine.pdf" target="_blank" class="header__link">Feuille de semaine</a>
        </nav>
        <button class="burger" onclick="document.getElementById('burger_menu').classList.toggle('show')">
            <span class="burger_line"></span>
            <span class="burger_line"></span>
            <span class="burger_line"></span>
        </button>
    </header>
    <main>
        <h1 class="home_title">Bienvenue en Terminale G</h1>
        <p class="home_desc">Cette section est d√©di√©e aux √©tudiants de Terminale G. Vous y trouverez des ressources, des informations sur les cours, et des conseils pour r√©ussir votre ann√©e scolaire.</p>
    </main>

    <section class="revision-section">
        <h2 class="revision-title">Fiches de R√©vision</h2>
        <div class="ajout-fiches">
            <a href="/ajout-fiche/" class="ajout-fiches-button">Ajouter une fiche de r√©vision</a>
        </div>
        <h2 class="revision-title">Liste des fiches :</h2>
        <div class="fiche-container">
            {% for fiche in fiches %}
            <div class="fiche-card" style="--bg-image: url('{{ url_for('static', filename='uploads/' ~ images[fiche.id_fiche][0]['filename']) }}');">
                <a href="/revision/fiche/{{ fiche.id_fiche }}" class="fiche-card--content">
                    <h3 class="fiche-title">{{ fiche.title }}</h3>
                    <p class="fiche-auteur">{{ fiche.auteur }}</p>
                    <p class="fiche-matiere">{{ matieres[fiche.id_fiche] }}</p>
                    <p>Voir plus ‚ÜóÔ∏è</p>
                </a>
                <button type="submit" class="fiche-like-button" data-fiche-id="{{ fiche.id_fiche }}"><span class="like-count">{{ fiche.nb_likes }}</span> üëç</button>
            </div>
            {% endfor %}
        </div>
    </section>

    <footer class="footer">

        <div class="footer-container">
            <!-- Footer Top -->
            <div class="footer-top">
                <h2 class="footer-title">‚ú¶TermG‚ú¶</h2>
                <p class="footer-desc">Un projet fait avec passion pour rendre l‚Äôinformation accessible √† tous.</p>
            </div>

            <div class="footer-content">

                <!-- Section Contact -->
                <div class="section-contact section-footer">
                    <h3 class="--contact-titre footer-title">Contact</h3>
                    <p class="--contact-mail">sachaler25@gmail.com</p>
                    <a class="--contact-insta" href="https://www.instagram.com/sachalry_/" target="_blank">Instagram</a>
                </div>

                <!-- Section Liens utiles -->
                <div class="section-liens section-footer">
                    <h3 class="--liens-titre footer-title">Liens utiles</h3>
                    <ul class="--liens-liste">
                        <li><a href="/" class="--liens-lien">Acceuil</a></li>
                        <li><a href="/cours/" class="--liens-lien">Cours</a></li>
                        <li><a href="/revision/" class="--liens-lien">R√©vision</a></li>
                        <li><a href="/static/feuille_de_semaine.pdf" target="_blank" class="--liens-lien">Feuille de semaine</a></li>
                    </ul>
                </div>

                <!-- Section L√©gales -->
                <div class="section-legales section-footer">
                    <h3 class="--legales-titre footer-title">L√©gales</h3>
                    <ul class="--legales-liste">
                        <li><a href="/static/mentions_legales.html" class="--legales-lien">Mentions l√©gales</a></li>
                        <li><a href="/static/politique_de_confidentialite.html" class="--legales-lien">Politique de confidentialit√©</a></li>
                        <li><a href="/static/cgu.html" class="--legales-lien">CGU</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="footer-copy">¬© 2026 Terminale G. Tous droits r√©serv√©s.</p>
            <p class="footer-author">D√©velopp√© par Sacha Leroy</p>
        </div>


    </footer>
</body>
<script src="/static/script.js"></script>
<script>
document.querySelectorAll('.fiche-like-button').forEach(button => {
    button.addEventListener('click', async () => {
        const ficheId = button.dataset.ficheId;
        let response;

        if (button.classList.contains('liked')) {
            // d√©j√† lik√©, on enleve le like
            response = await fetch(`/dislike_fiche/${ficheId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }
        else {
            response = await fetch(`/like_fiche/${ficheId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        }   

        const data = await response.json();

        // mise √† jour du compteur
        button.querySelector('.like-count').textContent = data.nb_likes;

        // √©tat visuel
        button.classList.toggle('liked');
    });
});
</script>
</html>